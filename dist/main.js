/*! For license information please see main.js.LICENSE.txt */
!function(){var t,e,n,r,i={112:function(t){t.exports=function(){"use strict";var t={145:function(t,e,n){function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}n.d(e,{A:function(){return r}})},284:function(t,e,n){function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}n.d(e,{A:function(){return r}})},458:function(t,e,n){n.d(e,{A:function(){return o}});var r=n(145),i=n(800);function o(t){return function(t){if(Array.isArray(t))return(0,r.A)(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||(0,i.A)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},800:function(t,e,n){n.d(e,{A:function(){return i}});var r=n(145);function i(t,e){if(t){if("string"==typeof t)return(0,r.A)(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.A)(t,e):void 0}}}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r](o,o.exports,n),o.exports}n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)};var r={};n.d(r,{default:function(){return l}});var i=n(458),o=n(284),a=n(800);function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,u=[],s=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(u.push(r.value),u.length!==e);s=!0);}catch(t){c=!0,i=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return u}}(t,e)||(0,a.A)(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var c=["svg","path","circle","rect","line","polyline","polygon","ellipse","g","defs","use","symbol","text","tspan","textPath","marker","linearGradient","radialGradient"];function l(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if("string"==typeof e[1]||"string"==typeof e[2]){var r=u(e,1)[0],i="string"==typeof e[2]?e[2]:void 0,a="string"==typeof e[1]?e[1]:void 0,s=e.find(function(t){return t&&!Array.isArray(t)&&"object"===(0,o.A)(t)})||{},c=e.find(function(t){return Array.isArray(t)})||[];return i&&(s.id=i),a&&(s.className=a),f(r,c,s)}if(e=e.filter(function(t){return null!=t}),Array.isArray(e[1])){var l=u(e,3),p=l[0],h=l[1],d=void 0===h?[]:h,y=l[2];return f(p,d,void 0===y?{}:y)}var v=u(e,3),b=v[0],m=v[1],g=void 0===m?{}:m,x=v[2];return f(b,void 0===x?[]:x,g)}function f(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Array.isArray(r)&&(n=r,r={}),"function"==typeof t)return t(r,n);if(t instanceof Node)e=t;else{if("string"!=typeof t)throw new Error("Invalid tag ".concat((0,o.A)(t)));e=c.includes(t)?document.createElementNS("http://www.w3.org/2000/svg",t):document.createElement(t)}!r.children&&Array.isArray(n)&&n.length&&(r.children=n);var i=r.ref;return delete r.ref,Object.keys(r).forEach(function(n){var i=r[n];if(void 0!==i)switch(n){case"child":p(e,[i]);break;case"children":if(!Array.isArray(i))throw new Error("children must be an array of Nodes");p(e,i.flat());break;case"attr":Object.keys(i).forEach(function(t){var n=i[t];void 0!==n&&e.setAttribute(t,n)});break;case"style":"string"==typeof i?e.setAttribute("style",i):Object.keys(i).forEach(function(t){var n=i[t];void 0!==n&&(e.style[t]=n)});break;case"dataset":for(var a in i){var u=i[a];if(void 0===u)return;e.dataset[a]=u}break;case"on":Object.keys(i).forEach(function(t){var n=i[t];void 0!==n&&n.forEach(function(n){e.addEventListener(t,n)})});break;default:c.includes(t)&&["number","string","bigint"].includes((0,o.A)(i))||/-/.test(n)?e.setAttribute(n,i):e[n]=i}}),i&&i.instanceOfRef&&(i.el=e),e}function p(t,e){var n,r=function(t){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=function(t,e){if(t){if("string"==typeof t)return s(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}(t))){e&&(t=e);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return o=t.done,t},e:function(t){a=!0,i=t},f:function(){try{o||null==e.return||e.return()}finally{if(a)throw i}}}}(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;Array.isArray(i)?p(t,i.flat()):(i=h(i))&&t.appendChild(i)}}catch(t){r.e(t)}finally{r.f()}}function h(t){if("function"==typeof t)return h(t());if(t instanceof Promise){var e=document.createTextNode("");t.then(function(t){if(Array.isArray(t))return(t=t.flat()).forEach(function(t){(t=h(t))&&e.before(t)}),void e.remove();(t=h(t))?e.replaceWith(t):e.remove()}),t=e}else if(t instanceof Text)"clone"in t&&(t=t.clone());else if(!(t instanceof Node)){var n=(0,o.A)(t);if(!["number","bigint","string"].includes(n))return null;if("string"===n&&!t)return null;t=l.text("".concat(t))}return t}return window&&!window.tag&&(window.tag=l),Object.defineProperties(l,{get:{value:function(t){return document.querySelector(t)}},getAll:{value:function(t){var e=document.querySelectorAll(t);return(0,i.A)(e)}},text:{value:function(t){return document.createTextNode(t)}}}),r.default}()},172:function(t){t.exports=function(t,e){this.v=t,this.k=e},t.exports.__esModule=!0,t.exports.default=t.exports},373:function(t){t.exports=function(t){var e=Object(t),n=[];for(var r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}},t.exports.__esModule=!0,t.exports.default=t.exports},546:function(t){function e(n,r,i,o){var a=Object.defineProperty;try{a({},"",{})}catch(n){a=0}t.exports=e=function(t,n,r,i){function o(n,r){e(t,n,function(t){return this._invoke(n,r,t)})}n?a?a(t,n,{value:r,enumerable:!i,configurable:!i,writable:!i}):t[n]=r:(o("next",0),o("throw",1),o("return",2))},t.exports.__esModule=!0,t.exports.default=t.exports,e(n,r,i,o)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},579:function(t,e,n){var r=n(738).default;t.exports=function(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}throw new TypeError(r(t)+" is not iterable")},t.exports.__esModule=!0,t.exports.default=t.exports},633:function(t,e,n){var r=n(172),i=n(993),o=n(869),a=n(887),u=n(791),s=n(373),c=n(579);function l(){"use strict";var e=i(),n=e.m(l),f=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function p(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))}var h={throw:1,return:2,break:3,continue:3};function d(t){var e,n;return function(r){e||(e={stop:function(){return n(r.a,2)},catch:function(){return r.v},abrupt:function(t,e){return n(r.a,h[t],e)},delegateYield:function(t,i,o){return e.resultName=i,n(r.d,c(t),o)},finish:function(t){return n(r.f,t)}},n=function(t,n,i){r.p=e.prev,r.n=e.next;try{return t(n,i)}finally{e.next=r.n}}),e.resultName&&(e[e.resultName]=r.v,e.resultName=void 0),e.sent=r.v,e.next=r.n;try{return t.call(this,e)}finally{r.p=e.prev,r.n=e.next}}}return(t.exports=l=function(){return{wrap:function(t,n,r,i){return e.w(d(t),n,r,i&&i.reverse())},isGeneratorFunction:p,mark:e.m,awrap:function(t,e){return new r(t,e)},AsyncIterator:u,async:function(t,e,n,r,i){return(p(e)?a:o)(d(t),e,n,r,i)},keys:s,values:c}},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=l,t.exports.__esModule=!0,t.exports.default=t.exports},738:function(t){function e(n){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},756:function(t,e,n){var r=n(633)();t.exports=r;try{regeneratorRuntime=r}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},791:function(t,e,n){var r=n(172),i=n(546);t.exports=function t(e,n){function o(t,i,a,u){try{var s=e[t](i),c=s.value;return c instanceof r?n.resolve(c.v).then(function(t){o("next",t,a,u)},function(t){o("throw",t,a,u)}):n.resolve(c).then(function(t){s.value=t,a(s)},function(t){return o("throw",t,a,u)})}catch(t){u(t)}}var a;this.next||(i(t.prototype),i(t.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),i(this,"_invoke",function(t,e,r){function i(){return new n(function(e,n){o(t,r,e,n)})}return a=a?a.then(i,i):i()},!0)},t.exports.__esModule=!0,t.exports.default=t.exports},869:function(t,e,n){var r=n(887);t.exports=function(t,e,n,i,o){var a=r(t,e,n,i,o);return a.next().then(function(t){return t.done?t.value:a.next()})},t.exports.__esModule=!0,t.exports.default=t.exports},887:function(t,e,n){var r=n(993),i=n(791);t.exports=function(t,e,n,o,a){return new i(r().w(t,e,n,o),a||Promise)},t.exports.__esModule=!0,t.exports.default=t.exports},993:function(t,e,n){var r=n(546);function i(){var e,n,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",u=o.toStringTag||"@@toStringTag";function s(t,i,o,a){var u=i&&i.prototype instanceof l?i:l,s=Object.create(u.prototype);return r(s,"_invoke",function(t,r,i){var o,a,u,s=0,l=i||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,a=0,u=e,p.n=n,c}};function h(t,r){for(a=t,u=r,n=0;!f&&s&&!i&&n<l.length;n++){var i,o=l[n],h=p.p,d=o[2];t>3?(i=d===r)&&(u=o[(a=o[4])?5:(a=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=t<2&&h<o[1])?(a=0,p.v=r,p.n=o[1]):h<d&&(i=t<3||o[0]>r||r>d)&&(o[4]=t,o[5]=r,p.n=d,a=0))}if(i||t>1)return c;throw f=!0,r}return function(i,l,d){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,d),a=l,u=d;(n=a<2?e:u)||!f;){o||(a?a<3?(a>1&&(p.n=-1),h(a,u)):p.n=u:p.v=u);try{if(s=2,o){if(a||(i="next"),n=o[i]){if(!(n=n.call(o,u)))throw TypeError("iterator result is not an object");if(!n.done)return n;u=n.value,a<2&&(a=0)}else 1===a&&(n=o.return)&&n.call(o),a<2&&(u=TypeError("The iterator does not provide a '"+i+"' method"),a=1);o=e}else if((n=(f=p.n<0)?u:t.call(r,p))!==c)break}catch(t){o=e,a=1,u=t}finally{s=1}}return{value:n,done:f}}}(t,o,a),!0),s}var c={};function l(){}function f(){}function p(){}n=Object.getPrototypeOf;var h=[][a]?n(n([][a]())):(r(n={},a,function(){return this}),n),d=p.prototype=l.prototype=Object.create(h);function y(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,r(t,u,"GeneratorFunction")),t.prototype=Object.create(d),t}return f.prototype=p,r(d,"constructor",p),r(p,"constructor",f),f.displayName="GeneratorFunction",r(p,u,"GeneratorFunction"),r(d),r(d,u,"Generator"),r(d,a,function(){return this}),r(d,"toString",function(){return"[object Generator]"}),(t.exports=i=function(){return{w:s,m:y}},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports}},o={};function a(t){var e=o[t];if(void 0!==e)return e.exports;var n=o[t]={exports:{}};return i[t].call(n.exports,n,n.exports,a),n.exports}a.m=i,a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,{a:e}),e},e=Object.getPrototypeOf?function(t){return Object.getPrototypeOf(t)}:function(t){return t.__proto__},a.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"==typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"==typeof n.then)return n}var i=Object.create(null);a.r(i);var o={};t=t||[null,e({}),e([]),e(e)];for(var u=2&r&&n;("object"==typeof u||"function"==typeof u)&&!~t.indexOf(u);u=e(u))Object.getOwnPropertyNames(u).forEach(function(t){o[t]=function(){return n[t]}});return o.default=function(){return n},a.d(i,o),i},a.d=function(t,e){for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},a.f={},a.e=function(t){return Promise.all(Object.keys(a.f).reduce(function(e,n){return a.f[n](t,e),e},[]))},a.u=function(t){return t+".js"},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n={},r="acode-plugin-python:",a.l=function(t,e,i,o){if(n[t])n[t].push(e);else{var u,s;if(void 0!==i)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==t||f.getAttribute("data-webpack")==r+i){u=f;break}}u||(s=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,a.nc&&u.setAttribute("nonce",a.nc),u.setAttribute("data-webpack",r+i),u.src=t),n[t]=[e];var p=function(e,r){u.onerror=u.onload=null,clearTimeout(h);var i=n[t];if(delete n[t],u.parentNode&&u.parentNode.removeChild(u),i&&i.forEach(function(t){return t(r)}),e)return e(r)},h=setTimeout(p.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=p.bind(null,u.onerror),u.onload=p.bind(null,u.onload),s&&document.head.appendChild(u)}},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},function(){var t;a.g.importScripts&&(t=a.g.location+"");var e=a.g.document;if(!t&&e&&(e.currentScript&&"SCRIPT"===e.currentScript.tagName.toUpperCase()&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");if(n.length)for(var r=n.length-1;r>-1&&(!t||!/^http(s?):/.test(t));)t=n[r--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=t}(),function(){var t={792:0};a.f.j=function(e,n){var r=a.o(t,e)?t[e]:void 0;if(0!==r)if(r)n.push(r[2]);else{var i=new Promise(function(n,i){r=t[e]=[n,i]});n.push(r[2]=i);var o=a.p+a.u(e),u=new Error;a.l(o,function(n){if(a.o(t,e)&&(0!==(r=t[e])&&(t[e]=void 0),r)){var i=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;u.message="Loading chunk "+e+" failed.\n("+i+": "+o+")",u.name="ChunkLoadError",u.type=i,u.request=o,r[1](u)}},"chunk-"+e,e)}};var e=function(e,n){var r,i,o=n[0],u=n[1],s=n[2],c=0;if(o.some(function(e){return 0!==t[e]})){for(r in u)a.o(u,r)&&(a.m[r]=u[r]);s&&s(a)}for(e&&e(n);c<o.length;c++)i=o[c],a.o(t,i)&&t[i]&&t[i][0](),t[i]=0},n=self.webpackChunkacode_plugin_python=self.webpackChunkacode_plugin_python||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}(),function(){"use strict";var t=a(112),e=a.n(t);function n(t,e,n,r,i,o,a){try{var u=t[o](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,i)}function r(t){return function(){var e=this,r=arguments;return new Promise(function(i,o){var a=t.apply(e,r);function u(t){n(a,i,o,u,s,"next",t)}function s(t){n(a,i,o,u,s,"throw",t)}u(void 0)})}}function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function o(t){var e=function(t){if("object"!=i(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==i(e)?e:e+""}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,o(r.key),r)}}function s(t,e,n){return(e=o(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var c=a(756),l=a.n(c),f=JSON.parse('{"id":"acode.plugin.python"}');function p(t,e,n){h(t,e),e.set(t,n)}function h(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function d(t,e){return t.get(v(t,e))}function y(t,e,n){return t.set(v(t,e),n),n}function v(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var b=new WeakMap,m=new WeakMap,g=new WeakMap,x=new WeakMap,w=new WeakMap,k=new WeakMap,A=new WeakMap,_=new WeakMap,S=new WeakMap,j=new WeakMap,O=new WeakMap,$=new WeakMap,M=new WeakSet,I=function(){return t=function t(){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),h(this,e=M),e.add(this),p(this,b,void 0),p(this,m,void 0),p(this,g,void 0),p(this,x,void 0),p(this,w,void 0),p(this,k,void 0),p(this,A,void 0),p(this,_,!1),s(this,"$input",null),s(this,"$page",null),s(this,"$runBtn",null),s(this,"$style",null),p(this,S,[]),p(this,j,0),p(this,O,0),p(this,$,0),s(this,"INITIALIZING",1),s(this,"INITIALIZED",2),s(this,"NOT_INTIALIZED",0),s(this,"name","Python"),s(this,"baseUrl",""),s(this,"pyodide",null)},n=[{key:"init",value:(I=r(l().mark(function t(n,r,i){var o,u,s,c,f=this;return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n.id="acode-plugin-python",y(A,this,i),this.$page=n,this.$page.settitle("Python"),y(k,this,r),o=n.onhide,n.onhide=function(){var t;y($,f,f.NOT_INTIALIZED),null===(t=d(b,f))||void 0===t||t.terminate(),f.initWorker(),o()},(u=this.$page.get(".main"))||(u=e()("div",{className:"main"}),this.$page.append(u)),u.style.padding="10px",u.style.overflow="auto",u.style.boxSizing="border-box",t.next=1,a.e(643).then(a.t.bind(a,643,17));case 1:return s=t.sent,t.next=2,a.e(633).then(a.bind(a,14));case 2:c=t.sent,this.$runBtn=e()("div","icon play_py",{onclick:this.run.bind(this),attr:{action:"run"}}),this.$style=e()("style",[c.default.replace("icon.ttf",s.default)]),this.$input=e()("div","print input",["\n      ",e()("textarea",{oninput:v(M,this,L).bind(this),onkeydown:v(M,this,C).bind(this)}),"\n    "]),this.checkRunnable(),editorManager.on("switch-file",this.checkRunnable.bind(this)),editorManager.on("rename-file",this.checkRunnable.bind(this)),document.head.append(this.$style),this.initWorker();case 3:case"end":return t.stop()}},t,this)})),function(t,e,n){return I.apply(this,arguments)})},{key:"initWorker",value:(f=r(l().mark(function t(){var e,n=this;return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(d($,this)===this.NOT_INTIALIZED){t.next=1;break}return t.abrupt("return");case 1:return y($,this,this.INITIALIZING),this.$page.settitle(strings["loading..."]),y(b,this,new Worker(this.baseUrl+"worker.js")),d(b,this).postMessage({action:"init",baseUrl:this.baseUrl,cacheFileUrl:d(A,this)}),d(b,this).onmessage=v(M,this,N).bind(this),t.prev=2,t.next=3,new Promise(function(t,e){y(g,n,t),y(m,n,e)});case 3:t.next=5;break;case 4:return t.prev=4,e=t.catch(2),this.print(e,"error"),t.abrupt("return");case 5:case"end":return t.stop()}},t,this,[[2,4]])})),function(){return f.apply(this,arguments)})},{key:"run",value:(c=r(l().mark(function t(){return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return v(M,this,T).call(this),y(O,this,0),v(M,this,E).call(this,this.$input),t.next=1,d(k,this).writeFile("");case 1:return t.next=2,this.initWorker();case 2:return t.next=3,this.runCode(editorManager.editor.getValue());case 3:case"end":return t.stop()}},t,this)})),function(){return c.apply(this,arguments)})},{key:"terminal",value:(o=r(l().mark(function t(){return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:v(M,this,T).call(this);case 1:case"end":return t.stop()}},t,this)})),function(){return o.apply(this,arguments)})},{key:"runCode",value:(i=r(l().mark(function t(e){var n,r,i=this;return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return d(b,this).postMessage({action:"run",code:e}),t.prev=1,t.next=2,new Promise(function(t,e){y(x,i,t),y(w,i,e)});case 2:n=t.sent,this.print(n,"output"),t.next=4;break;case 3:t.prev=3,r=t.catch(1),this.print(r,"error");case 4:case"end":return t.stop()}},t,this,[[1,3]])})),function(t){return i.apply(this,arguments)})},{key:"destroy",value:function(){var t;this.$runBtn&&(this.$runBtn.onclick=null,this.$runBtn.remove()),null===(t=d(b,this))||void 0===t||t.terminate(),editorManager.off("switch-file",this.checkRunnable.bind(this)),editorManager.off("rename-file",this.checkRunnable.bind(this)),this.$style.remove()}},{key:"checkRunnable",value:function(){var t=editorManager.activeFile;if(this.$runBtn.isConnected&&this.$runBtn.remove(),null!=t&&t.name.endsWith(".py")){var e,n=root.get("header");null===(e=n.get(".icon.play_arrow"))||void 0===e||e.remove(),n.insertBefore(this.$runBtn,n.lastChild)}}},{key:"print",value:function(t,n){if(this.$page.isConnected){var r=e()("div",{className:"print ".concat(n||""),textContent:t});v(M,this,E).call(this,r,this.$input)}}}],n&&u(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,i,o,c,f,I}();function T(){var t=this.$page.get(".main");this.$page.isConnected||(this.$page.classList.remove("hide"),this.$page.show()),t.innerHTML=""}function P(){this.$page.get(".main").innerHTML="",v(M,this,E).call(this,this.$input)}function E(){var t;this.$page.get(".main")||this.$page.append(e()("div",{className:"main"})),(t=this.$page.get(".main")).append.apply(t,arguments)}function N(t){return W.apply(this,arguments)}function W(){return(W=r(l().mark(function t(e){var n,r,i,o,a,u;return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=e.data,r=n.action,i=n.success,o=n.error,a=n.text,u=r,t.next="init"===u?1:"run"===u?2:"input"===u?3:"stdout"===u?5:"stderr"===u?6:7;break;case 1:return y($,this,this.INITIALIZED),this.$page.settitle("Python"),i?d(g,this).call(this):d(m,this).call(this,o),t.abrupt("continue",8);case 2:return i?d(x,this).call(this):d(w,this).call(this,o),t.abrupt("continue",8);case 3:return y(_,this,!0),a&&this.print(a),t.next=4,d(k,this).writeFile("");case 4:return this.$input.get("textarea").focus(),t.abrupt("continue",8);case 5:return this.print(a),t.abrupt("continue",8);case 6:return this.print(a,"error"),t.abrupt("continue",8);case 7:return t.abrupt("continue",8);case 8:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}function C(t){var e=t.target.value.split("\n"),n=1===v(M,this,F).call(this),r=v(M,this,F).call(this)===e.length;n&&"ArrowUp"===t.key&&(t.preventDefault(),d(j,this)>0&&(y(j,this,d(j,this)-1),t.target.value=d(S,this)[d(j,this)])),r&&"ArrowDown"===t.key&&(t.preventDefault(),d(j,this)<d(S,this).length&&(y(j,this,d(j,this)+1),t.target.value=d(S,this)[d(j,this)]||"")),"l"===t.key&&t.ctrlKey&&v(M,this,P).call(this),"Tab"===t.key&&(t.preventDefault(),t.target.value+="\t")}function F(){var t=this.$input.get("textarea"),e=t.selectionStart;if(e===t.selectionEnd)return t.value.slice(0,e).split("\n").length}function L(t){var e=t.target,n=e.value;if(e.style.height="".concat(e.scrollHeight,"px"),n.endsWith("\n")){var r,i;if(d(_,this))return y(_,this,!1),n=n.slice(0,-1),d(k,this).writeFile(n+"\0".concat((y(O,this,(r=d(O,this),i=r++,r)),i))),this.print(n,"input"),void(this.$input.get("textarea").value="");v(M,this,G).call(this,n)||(d(S,this).push(n.trim()),y(j,this,d(S,this).length),this.print(n,"input"),this.runCode(n),this.$input.get("textarea").value="")}}function G(t){var e=t.trim().split("\n"),n=e[e.length-1];return!!/:$/.test(n)||!!/^\W+/.test(n)&&!/\n\n$/.test(t)}if(window.acode){var U=new I;acode.setPluginInit(f.id,function(t,e,n){var r=n.cacheFileUrl,i=n.cacheFile;t.endsWith("/")||(t+="/"),U.baseUrl=t,U.init(e,i,r)}),acode.setPluginUnmount(f.id,function(){U.destroy()})}}()}();